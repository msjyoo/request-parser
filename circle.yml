machine:
  timezone: UTC
  php:
    version: 5.6.2

dependencies:
  pre:
    # Enable XDebug.
    - sed -i 's/^;//' ~/.phpenv/versions/$(phpenv global)/etc/conf.d/xdebug.ini

test:
  override:
    - phpunit --coverage-html $CIRCLE_ARTIFACTS/coverage

general:
  artifacts:
    - "build/"

deployment:
  build_phar:
    branch: master
    commands:
      - vendor/bin/box build